var e=Object.defineProperty,l=Object.defineProperties,a=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,n=(l,a,t)=>a in l?e(l,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[a]=t;import{o as i,a as s,b as d,p as u}from"./options.507ac149.js";import{l as c}from"./lodash.6789d9fe.js";import{k as p,l as m,m as f,n as y}from"./module-mgmt.a50a932c.js";import{i as g}from"./index.dfc696ff.js";import{d as h,ag as S,ab as b,aA as C,am as w,aB as _,W as k,V as I,r as Q,aL as O,o as T,a0 as v,a as P,w as L,aa as j,ad as x,a5 as z,ar as N,a3 as V,c as D,a4 as A,au as B}from"./vendor.46c44667.js";const E=h({name:"OrderList",setup(e,{attrs:h,slots:Q,emit:O}){const T=S(),v=b(null),P={pageNumber:1,pageSize:20,orderNo:"",orderStatus:i.ALL},L=C({listQuery:c.exports.cloneDeep(P),list:[],total:0,listLoading:!1,multipleSelectionIds:[]}),j=()=>{L.listLoading=!0,p(L.listQuery).then((e=>{L.list=e.data.list,L.total=e.data.totalCount})).finally((()=>{L.listLoading=!1}))};return w((()=>{j()})),x=((e,l)=>{for(var a in l||(l={}))r.call(l,a)&&n(e,a,l[a]);if(t)for(var a of t(l))o.call(l,a)&&n(e,a,l[a]);return e})({},_(L)),l(x,a({orderStatus:i,orderStatusOptions:s,handleSearch:()=>{L.listQuery.pageNumber=1,j()},resetQuery:()=>{L.listQuery=c.exports.cloneDeep(P),j()},listQueryRef:v,getList:j,handleConfig:e=>{k.confirm("确定配货完成吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{m(e).then((()=>{I.success("配货操作成功"),j()}))})).catch((()=>{I.info("已取消操作")}))},handleSend:e=>{k.confirm("确定出库吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{f(e).then((()=>{I.success("出库操作成功"),j()}))})).catch((()=>{I.info("已取消操作")}))},handleClose:e=>{k.confirm("确定要关闭订单吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{y(e).then((()=>{I.success("关闭订单操作成功"),j()}))})).catch((()=>{I.info("已取消操作")}))},orderStatusFilter:e=>g(e)?"未知状态":d[e]||"",payTypeFilter:e=>u[e]||"未知",handleViewDetail:e=>{T.push({name:"OrderDetail",query:{id:e.orderId}})},handleSelectionChange:e=>{L.multipleSelectionIds=e.map((e=>e.orderId))}}));var x}}),F={class:"app-container"},U=B("查询"),R=B("重置"),M={class:"operate-container mt15"},W=B("配货完成"),q=z("span",null,"出库",-1),G=B("关闭订单"),K=B("配货完成"),H=B("出库"),J=B("关闭订单"),X=B("订单详情");E.render=function(e,l,a,t,r,o){const n=Q("el-input"),i=Q("el-form-item"),s=Q("el-option"),d=Q("el-select"),u=Q("el-button"),c=Q("el-form"),p=Q("el-card"),m=Q("svg-icon"),f=Q("el-table-column"),y=Q("el-table"),g=Q("pagination"),h=O("loading");return T(),v("div",F,[P(p,null,{default:L((()=>[P(c,{ref:"listQueryRef",model:e.listQuery,inline:!0,"label-width":"100px",size:"small"},{default:L((()=>[P(i,null,{default:L((()=>[P(n,{modelValue:e.listQuery.orderNo,"onUpdate:modelValue":l[0]||(l[0]=l=>e.listQuery.orderNo=l),placeholder:"请输入订单号"},null,8,["modelValue"])])),_:1}),P(i,null,{default:L((()=>[P(d,{modelValue:e.listQuery.orderStatus,"onUpdate:modelValue":l[1]||(l[1]=l=>e.listQuery.orderStatus=l),placeholder:"请选择订单状态"},{default:L((()=>[(T(!0),v(j,null,x(e.orderStatusOptions,(e=>(T(),D(s,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:1},8,["modelValue"])])),_:1}),P(i,null,{default:L((()=>[P(u,{type:"primary",icon:"el-icon-search",onClick:e.handleSearch},{default:L((()=>[U])),_:1},8,["onClick"]),P(u,{icon:"el-icon-refresh",onClick:e.resetQuery},{default:L((()=>[R])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model"])])),_:1}),z("div",M,[P(u,{type:"primary",size:"small",onClick:l[2]||(l[2]=l=>e.handleConfig(e.multipleSelectionIds))},{default:L((()=>[W])),_:1}),P(u,{type:"primary",size:"small",onClick:l[3]||(l[3]=l=>e.handleSend(e.multipleSelectionIds))},{default:L((()=>[P(m,{name:"shipped_out"}),q])),_:1}),P(u,{type:"danger",class:"el-icon-delete",size:"small",onClick:l[4]||(l[4]=l=>e.handleClose(e.multipleSelectionIds))},{default:L((()=>[G])),_:1})]),N(P(y,{data:e.list,border:"",onSelectionChange:e.handleSelectionChange},{default:L((()=>[P(f,{type:"selection",width:"55"}),P(f,{align:"center",label:"订单号",prop:"orderNo"}),P(f,{align:"center",label:"订单总价",prop:"totalPrice"}),P(f,{align:"center",label:"订单状态",prop:"orderStatus"},{default:L((l=>[z("span",null,V(e.orderStatusFilter(l.row.orderStatus)),1)])),_:1}),P(f,{align:"center",label:"支付方式",prop:"payType"},{default:L((l=>[z("span",null,V(e.payTypeFilter(l.row.payType)),1)])),_:1}),P(f,{align:"center",label:"创建时间",prop:"createTime"}),P(f,{"header-align":"center",align:"center",label:"操作"},{default:L((l=>[l.row.orderStatus===e.orderStatus.PAID?(T(),D(u,{key:0,size:"small",onClick:a=>e.handleConfig([l.row.orderId])},{default:L((()=>[K])),_:2},1032,["onClick"])):A("",!0),l.row.orderStatus===e.orderStatus.PICKING_COMPLETE?(T(),D(u,{key:1,size:"small",onClick:a=>e.handleSend([l.row.orderId])},{default:L((()=>[H])),_:2},1032,["onClick"])):A("",!0),l.row.orderStatus===e.orderStatus.TRANSACTION_COMPLETE||l.row.orderStatus<e.orderStatus.WAIT_PAID?A("",!0):(T(),D(u,{key:2,size:"small",onClick:a=>e.handleClose([l.row.orderId])},{default:L((()=>[J])),_:2},1032,["onClick"])),P(u,{type:"primary",class:"el-icon-view",size:"small",onClick:a=>e.handleViewDetail(l.row)},{default:L((()=>[X])),_:2},1032,["onClick"])])),_:1})])),_:1},8,["data","onSelectionChange"]),[[h,e.listLoading]]),P(g,{total:e.total,page:e.listQuery.pageNumber,"onUpdate:page":l[5]||(l[5]=l=>e.listQuery.pageNumber=l),limit:e.listQuery.pageSize,"onUpdate:limit":l[6]||(l[6]=l=>e.listQuery.pageSize=l),onPagination:e.getList},null,8,["total","page","limit","onPagination"])])};export{E as default};
