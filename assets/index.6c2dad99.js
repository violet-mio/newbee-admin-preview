var a=Object.defineProperty,t=Object.defineProperties,e=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,r=(t,e,o)=>e in t?a(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o;import{b as i,e as n}from"./module-mgmt.a50a932c.js";import{p as d,b as p}from"./index.dfc696ff.js";import{g,a as u}from"./options.1e9c8a53.js";import{d as c,ag as m,aA as S,am as b,aB as f,Z as y,$ as L,V as _,r as h,aL as w,o as O,a0 as k,a as v,w as I,ar as C,a5 as j,a3 as E,c as P,a4 as Q,au as U}from"./vendor.46c44667.js";const N=c({name:"GoodsList",setup(){const a=m(),c=S({list:[],listLoading:!1,total:0,listQuery:{page:1,limit:10}});b((()=>{y()}));const y=()=>{c.listLoading=!0,i({pageNumber:c.listQuery.page,pageSize:c.listQuery.limit}).then((a=>{c.list=a.data.list,c.total=a.data.totalCount})).finally((()=>{c.listLoading=!1}))};return L=((a,t)=>{for(var e in t||(t={}))l.call(t,e)&&r(a,e,t[e]);if(o)for(var e of o(t))s.call(t,e)&&r(a,e,t[e]);return a})({},f(c)),t(L,e({handleAdd:()=>{a.push({name:"AddGoods"})},handleEdit:t=>{a.push({name:"EditGoods",query:{id:t.goodsId}})},handleUpdateStatus:(a,t)=>{n({ids:[a.goodsId],status:t}).then((()=>{_.success("修改成功"),y()}))},parseImgUrl:d,getOptionNameById:p,goodsSellStatus:g,displayGoodsStatusText:a=>u[a]||"",getList:y}));var L}});y("data-v-68b4830f");const G={class:"app-container"},x=U("新增商品"),A=["src"],F=U("编辑"),B=U("上架"),T=U("下架");L(),N.render=function(a,t,e,o,l,s){const r=h("el-button"),i=h("el-card"),n=h("el-table-column"),d=h("el-table"),p=h("pagination"),g=w("loading");return O(),k("div",G,[v(i,{class:"operate-container",shadow:"never"},{default:I((()=>[v(r,{type:"primary",onClick:a.handleAdd},{default:I((()=>[x])),_:1},8,["onClick"])])),_:1}),C(v(d,{data:a.list,border:""},{default:I((()=>[v(n,{align:"center",label:"商品编号",prop:"goodsId"}),v(n,{align:"center",label:"商品名称",prop:"goodsName"}),v(n,{align:"center",label:"商品简介",prop:"goodsIntro"}),v(n,{align:"center",label:"商品图片",prop:"goodsCoverImg"},{default:I((t=>[(O(),k("img",{class:"goods-img",key:t.row.goodsId,src:a.parseImgUrl(t.row.goodsCoverImg),alt:"商品图片"},null,8,A))])),_:1}),v(n,{align:"center",label:"商品库存",prop:"stockNum"}),v(n,{align:"center",label:"商品售价",prop:"sellingPrice"}),v(n,{align:"center",label:"商品状态",prop:"goodsSellStatus"},{default:I((t=>[j("span",null,E(a.displayGoodsStatusText(t.row.goodsSellStatus)),1)])),_:1}),v(n,{"header-align":"center",align:"center",label:"操作"},{default:I((t=>[v(r,{type:"primary",onClick:e=>a.handleEdit(t.row)},{default:I((()=>[F])),_:2},1032,["onClick"]),t.row.goodsSellStatus===a.goodsSellStatus.OFF_SELL?(O(),P(r,{key:0,onClick:e=>a.handleUpdateStatus(t.row,a.goodsSellStatus.ON_SELL)},{default:I((()=>[B])),_:2},1032,["onClick"])):Q("",!0),t.row.goodsSellStatus===a.goodsSellStatus.ON_SELL?(O(),P(r,{key:1,type:"danger",onClick:e=>a.handleUpdateStatus(t.row,a.goodsSellStatus.OFF_SELL)},{default:I((()=>[T])),_:2},1032,["onClick"])):Q("",!0)])),_:1})])),_:1},8,["data"]),[[g,a.listLoading]]),v(p,{total:a.total,page:a.listQuery.page,"onUpdate:page":t[0]||(t[0]=t=>a.listQuery.page=t),limit:a.listQuery.limit,"onUpdate:limit":t[1]||(t[1]=t=>a.listQuery.limit=t),onPagination:a.getList},null,8,["total","page","limit","onPagination"])])},N.__scopeId="data-v-68b4830f";export{N as default};
